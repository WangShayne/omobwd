---
name: brainstorm
description: 通过对话探索想法，澄清需求，可选输出设计文档
when_to_use: 当开始新功能、不确定实现方向、或需要理清思路时
version: 1.0.0
---

# Brainstorm - 头脑风暴

通过自然对话帮助用户将模糊想法转化为清晰的设计方案。

## 核心原则

- **单次提问** - 每条消息只问一个问题，避免信息过载
- **优先多选** - 尽可能提供选项，降低回答负担
- **渐进深入** - 从目标到方案，逐步细化
- **YAGNI** - 主动削减不必要的复杂度

## 流程

### 1. 理解阶段

首先了解项目上下文：
- 读取项目文件结构
- 查看最近 git 提交（如有）
- 识别技术栈和现有模式

然后逐步澄清用户意图：
- 这个功能/改动的目标是什么？
- 有什么约束条件？
- 成功的标准是什么？

### 2. 探索阶段

提出 2-3 个可行方案：
- 每个方案简要说明核心思路
- 列出各方案的 trade-offs
- 给出推荐并解释理由

示例格式：
```
方案 A：[名称]
思路：...
优点：...
缺点：...

方案 B：[名称]
思路：...
优点：...
缺点：...

推荐：方案 A，因为...
```

### 3. 收敛阶段

确定方案后，分段呈现设计：
- 每段 200-300 字
- 每段后询问"这部分符合预期吗？"
- 根据反馈调整，可回退重新讨论

覆盖内容：
- 架构/结构
- 核心组件
- 数据流
- 错误处理
- 测试策略

### 4. 输出阶段（可选）

根据用户意愿选择后续动作：

| 用户说 | 动作 |
|--------|------|
| "生成文档" | 写入 `docs/plans/YYYY-MM-DD-<topic>.md` |
| "继续实现" | 调用 `omobwd:do` 开始执行 |
| "就这样" | 结束对话，结论留在对话中 |

## 退出条件

- 用户明确表示思路已清晰
- 用户选择生成文档或开始实现
- 用户手动终止

## 示例对话

```
用户：我想给项目加个缓存功能

助手：好的，让我先了解一下背景。
      这个缓存主要用于什么场景？
      A) API 响应缓存 - 减少重复请求
      B) 计算结果缓存 - 避免重复计算
      C) 静态资源缓存 - 加速页面加载
      D) 其他（请说明）

用户：A

助手：API 响应缓存。缓存的失效策略偏好？
      A) TTL 固定时间过期
      B) 主动失效 - 数据更新时清除
      C) 混合 - TTL + 主动失效
      
...（继续澄清，然后提出方案）
```

## 与其他技能的关系

- 可独立使用，不依赖其他技能
- 可被 `omobwd:do` 调用（当任务需要澄清时）
- 完成后可调用 `omobwd:write-docs` 生成文档
- 完成后可调用 `omobwd:do` 开始实现
